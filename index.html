<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MCQ PDF Reviewer</title>

  <link rel="stylesheet" href="styles.css" />

  <!-- PDF.js (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/4.10.38/pdf.min.js"></script>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="titleBox">
        <h1>MCQ PDF Reviewer</h1>
        <p class="sub">
          Upload a PDF → parse MCQs → randomized quiz with instant feedback and explanations. No backend; everything stays in your browser.
        </p>
      </div>
      <div class="pill">
        <span class="mono">Dark-mode</span>
        <span class="dot">•</span>
        <span class="mono">Session-only save</span>
      </div>
    </header>

    <div class="grid">
      <!-- LEFT: Quiz -->
      <section class="card">
        <div class="cardHd">
          <h2>Quiz</h2>
          <div class="row">
            <button class="btn btnGhost" id="btnRestart" disabled>Restart</button>
            <button class="btn btnDanger" id="btnClearSession">Clear Session</button>
          </div>
        </div>

        <div class="cardBd">
          <div class="status">
            <div class="kpi"><b id="kpiQ">0/0</b><span>question</span></div>
            <div class="kpi"><b id="kpiScore">0</b><span>score</span></div>
            <div class="kpi"><b id="kpiParsed">0</b><span>parsed</span></div>
          </div>

          <div class="bar"><div id="progressFill"></div></div>

          <div class="sep"></div>

          <div id="quizEmpty" class="small">
            Upload a PDF on the right, then click <span class="mono">Parse PDF</span>. After parsing, click <span class="mono">Start Quiz</span>.
          </div>

          <div id="quizArea" class="hide">
            <div class="qTop">
              <div class="qNo" id="qNo"></div>
              <div class="qNo" id="qMeta"></div>
            </div>

            <div class="qText" id="qText"></div>

            <form id="optForm" class="opts"></form>

            <div class="row mt">
              <button class="btn btnPrimary" id="btnSubmit" type="button" disabled>Submit</button>
              <button class="btn" id="btnNext" type="button" class="hide">Next</button>
            </div>

            <div class="feedback" id="feedback">
              <span class="tag" id="fbTag"></span>
              <div class="fbLine" id="fbText"></div>
            </div>
          </div>

          <div id="resultArea" class="hide mt2">
            <div class="sep"></div>
            <h3 class="h3">Review</h3>
            <p class="small" id="resultSummary"></p>
            <div class="list" id="reviewList"></div>
          </div>
        </div>
      </section>

      <!-- RIGHT: Import/Settings -->
      <aside class="card">
        <div class="cardHd">
          <h2>Import & Settings</h2>
          <div class="pill"><span class="warnText">Format-sensitive</span></div>
        </div>

        <div class="cardBd">
          <div class="row">
            <input class="input" id="pdfFile" type="file" accept="application/pdf" />
          </div>

          <div class="row">
            <button class="btn btnPrimary" id="btnParse">Parse PDF</button>
            <button class="btn" id="btnStart" disabled>Start Quiz</button>
          </div>

          <p class="hint">
            Best formats:
            <br><span class="mono">1. Question ...</span>
            <br><span class="mono">A) ... B) ... C) ... D) ...</span>
            <br><span class="mono">Answer: B</span> / <span class="mono">Explanation: ...</span>
            <br><br>OR answer section:
            <br><span class="mono">Answers</span>
            <br><span class="mono">1) B - explanation ...</span>
          </p>

          <div class="sep"></div>

          <div class="row">
            <div class="tog">
              <label for="togShuffleQ">Shuffle questions</label>
              <input id="togShuffleQ" type="checkbox" checked />
            </div>
            <div class="tog">
              <label for="togShuffleO">Shuffle options</label>
              <input id="togShuffleO" type="checkbox" />
            </div>
          </div>

          <div class="row">
            <div class="tog">
              <label for="togAutoNext">Auto-next if correct</label>
              <input id="togAutoNext" type="checkbox" />
            </div>
            <div class="tog">
              <label for="togSessionSave">Save to session</label>
              <input id="togSessionSave" type="checkbox" checked />
            </div>
          </div>

          <div class="sep"></div>

          <div class="row">
            <button class="btn" id="btnExportJson" disabled>Export parsed JSON</button>
            <button class="btn" id="btnPasteMode">Paste text instead</button>
          </div>

          <div id="pasteBox" class="hide mt">
            <textarea class="input" id="pasteText" rows="10" placeholder="Paste MCQ text here..."></textarea>
            <div class="row mt">
              <button class="btn btnPrimary" id="btnParsePaste">Parse pasted text</button>
              <button class="btn" id="btnClosePaste">Close</button>
            </div>
            <p class="hint">If PDF extraction is messy, paste often parses cleaner.</p>
          </div>

          <div class="sep"></div>
          <p class="small" id="log"></p>
        </div>
      </aside>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
